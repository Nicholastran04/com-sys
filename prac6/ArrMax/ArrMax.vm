// Contains a function ArrMax.arrMax that finds and returns the largest element in the array a of length b.
// a & b are both supplied as arguments

function ArrMax.arrMax 2
    
    // Initialize loop counter (i = 0)
    push constant 0
    pop local 1
    
    // Initialize max with the first element
    push argument 0
    pop pointer 1
    push that 0
    pop local 0
    
    push constant 1
    pop local 1
    
label LOOP
    push local 1
    push argument 1
    eq
    if-goto END_LOOP
    
    push argument 0
    push local 1
    add
    pop pointer 1
    
    // Compare current element with max
    push that 0
    push local 0
    gt
    if-goto UPDATE_MAX
    goto CONTINUE_LOOP
    
label UPDATE_MAX
    push that 0
    pop local 0
    
label CONTINUE_LOOP
    push local 1
    push constant 1
    add
    pop local 1
    goto LOOP
    
label END_LOOP
    push local 0
    return