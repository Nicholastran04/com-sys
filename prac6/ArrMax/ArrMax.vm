// Contains a function ArrMax.arrMax that finds and returns the largest element in the array a of length b.
// a & b are both supplied as arguments

function ArrMax.arrMax 1
    // Point start of array
    push argument 0
    pop pointer 1

    // Initial max
    push that 0
    pop local 0

    // Index counter
    push constant 1

label LOOP
    // Check if counter i equals n
    push argument 1
    eq
    if-goto END_LOOP
    
    // Compare current array element with current max
    push pointer 1
    push constant 0
    add
    push constant 0
    pop temp 0
    
    push that 0
    push local 0
    gt
    if-goto UPDATE_MAX
    goto SKIP_UPDATE

label UPDATE_MAX
    push that 0
    pop local 0

label SKIP_UPDATE
    push constant 1
    add
    
    push pointer 1
    push constant 1
    add
    pop pointer 1
    
    goto LOOP

label END_LOOP
    push local 0
    return